!function(e){e.wpProQuizFront=function(i,t){function o(){var e=0,i=-1,t=0,o=!1
this.questionStart=function(t){-1!=i&&this.questionStop(),i=t,e=+new Date},this.questionStop=function(){-1!=i&&(d[i].time+=Math.round((new Date-e)/1e3),i=-1)},this.startQuiz=function(){o&&this.stopQuiz(),t=+new Date,o=!0},this.stopQuiz=function(){o&&(quizEndTimer=+new Date,d.comp.quizTime+=Math.round((quizEndTimer-t)/1e3),d.comp.quizEndTimestamp=quizEndTimer,d.comp.quizStartTimestamp=t,o=!1)},this.init=function(){}}function n(i,t,o,n){if("single"==i.type||"multiple"==i.type)n.children().each(function(i){var n=e(this),s=n.attr("data-pos")
if(void 0!=t[s]){1==t[s]&&(e(".wpProQuiz_questionInput",n).prop("checked","checked"),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}}))}})
else if("free_answer"==i.type)n.children().each(function(i){e(this)
e(".wpProQuiz_questionInput",this).val(t)}),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})
else if("sort_answer"==i.type)jQuery.each(t,function(i,t){var o=e('li.wpProQuiz_questionListItem[data-pos="'+t+'"]',n),s=e("div.wpProQuiz_sortable",o)
e(s).text()
jQuery(n).append(o)}),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})
else if("matrix_sort_answer"==i.type)jQuery.each(t,function(i,t){var s=e('.wpProQuiz_matrixSortString .wpProQuiz_sortStringList li[data-pos="'+i+'"]',o),r=e('li.wpProQuiz_questionListItem[data-pos="'+t+'"] ul.wpProQuiz_maxtrixSortCriterion',n)
jQuery(s).appendTo(r)}),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})
else if("cloze_answer"==i.type)jQuery('span.wpProQuiz_cloze input[type="text"]',n).each(function(i){void 0!==t[i]&&e(this).val(t[i])}),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})
else if("assessment_answer"==i.type)e('input.wpProQuiz_questionInput[value="'+t+'"]',n).attr("checked","checked"),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})
else if("essay"==i.type)if(n.find("#uploadEssayFile_"+i.id).length){var a=n.find("#uploadEssayFile_"+i.id)
e(a).val(t),e("<p>"+s(t)+"</p>").insertAfter(a),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}else n.find(".wpProQuiz_questionEssay").length&&(n.find(".wpProQuiz_questionEssay").html(t),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}}))}function s(e){return void 0!=e?e.split("/").reverse()[0]:""}var r=e(i),a=t,u=this,d=new Object,c=new Object,p=0,l=null,h=[],f="",w=!1,m=1,v=0,_=null,Q="",z="",P={randomAnswer:0,randomQuestion:0,disabledAnswerMark:0,checkBeforeStart:0,preview:0,cors:0,isAddAutomatic:0,quizSummeryHide:0,skipButton:0,reviewQustion:0,autoStart:0,forcingQuestionSolve:0,hideQuestionPositionOverview:0,formActivated:0,maxShowQuestion:0,sortCategories:0},g={isQuizStart:0,isLocked:0,loadLock:0,isPrerequisite:0,isUserStartLocked:0},q={check:'input[name="check"]',wdmcheck:'input[name="wdmcheck"]',next:'input[name="next"]',questionList:".wpProQuiz_questionList",skip:'input[name="skip"]',singlePageLeft:'input[name="wpProQuiz_pageLeft"]',singlePageRight:'input[name="wpProQuiz_pageRight"]'},y={back:r.find('input[name="back"]'),wdmcheck:r.find(q.wdmcheck),next:r.find(q.next),quiz:r.find(".wpProQuiz_quiz"),questionList:r.find(".wpProQuiz_list"),results:r.find(".wpProQuiz_results"),sending:r.find(".wpProQuiz_sending"),quizStartPage:r.find(".wpProQuiz_text"),timelimit:r.find(".wpProQuiz_time_limit"),toplistShowInButton:r.find(".wpProQuiz_toplistShowInButton"),listItems:e()},k={token:"",isUser:0},x={START:0,END:1},S=function(){var i=a.timelimit,t=0,o={},n="ldadv-time-limit-"+a.user_id+"-"+a.quizId
return o.stop=function(){i&&(e.removeCookie(n),window.clearInterval(t),y.timelimit.hide())},o.start=function(){if(i){e.cookie.raw=!0
var s=1e3*i,r=e.cookie(n),a=r||i,d=1e3*a,c=y.timelimit.find("span").text(u.methode.parseTime(a)),p=y.timelimit.find(".wpProQuiz_progress")
y.timelimit.show()
var l=+new Date
t=window.setInterval(function(){var i=+new Date-l,t=d-i
i>=500&&(r=t/1e3,c.text(u.methode.parseTime(Math.ceil(r))),e.cookie(n,r)),p.css("width",t/s*100+"%"),t<=0&&(o.stop(),u.methode.finishQuiz(!0))},16)}},o}(),b=new function(){function i(e){var i=c.eq(e),t=i.offset().top,o=s.offset().top,n=t-o
if(n-4<0||n+32>100){var r=o-c.eq(0).offset().top-(o-d.offset().top)+i.position().top
r>w&&(r=w)
var u=r/h
d.attr("style","margin-top: "+-r+"px !important"),a.css({top:u})}}function t(e){var i="",t=m[e]
t.solved?i="wpProQuiz_reviewQuestionSolved":t.review&&(i="wpProQuiz_reviewQuestionReview"),c.eq(e).removeClass("wpProQuiz_reviewQuestionSolved"),c.eq(e).removeClass("wpProQuiz_reviewQuestionReview"),""!=i&&c.eq(e).addClass(i)}function o(e){e.preventDefault()
var i=e.pageY-l
i<0&&(i=0),i>p&&(i=p)
var t=h*i
d.attr("style","margin-top: "+-t+"px !important"),a.css({top:i})}function n(i){i.preventDefault(),e(document).unbind(".scrollEvent")}var s=[],a=[],d=[],c=[],p=0,l=0,h=0,f=0,w=0,m=[]
this.init=function(){s=r.find(".wpProQuiz_reviewQuestion"),a=s.find("div"),d=s.find("ol"),c=d.children(),a.mousedown(function(i){i.preventDefault(),i.stopPropagation(),l=i.pageY-a.offset().top+f,e(document).bind("mouseup.scrollEvent",n),e(document).bind("mousemove.scrollEvent",o)}),c.click(function(i){u.methode.showQuestion(e(this).index())}),r.bind("questionSolved",function(e){m[e.values.index].solved=e.values.solved,t(e.values.index)}),r.bind("changeQuestion",function(e){c.removeClass("wpProQuiz_reviewQuestionTarget"),c.eq(e.values.index).addClass("wpProQuiz_reviewQuestionTarget"),i(e.values.index)}),r.bind("reviewQuestion",function(e){m[e.values.index].review=!m[e.values.index].review,t(e.values.index)}),s.bind("mousewheel DOMMouseScroll",function(e){e.preventDefault()
var i=e.originalEvent,t=i.wheelDelta?-i.wheelDelta/120:i.detail/3,o=20*t,n=f-d.offset().top+o
n>w&&(n=w),n<0&&(n=0)
var s=n/h
return d.attr("style","margin-top: "+-n+"px !important"),a.css({top:s}),!1})},this.show=function(e){if(P.reviewQustion&&s.parent().show(),r.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(),!e){d.attr("style","margin-top: 0px !important"),a.css({top:0})
var i=d.outerHeight(),t=s.height()
p=t-a.height(),l=0,w=i-t,h=w/p,this.reset(),i>100&&a.show(),f=a.offset().top}},this.hide=function(){s.parent().hide()},this.toggle=function(){if(P.reviewQustion){s.parent().toggle(),c.removeClass("wpProQuiz_reviewQuestionTarget"),r.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(),d.attr("style","margin-top: 0px !important"),a.css({top:0})
var e=d.outerHeight(),i=s.height()
p=i-a.height(),l=0,w=e-i,h=w/p,e>100&&a.show(),f=a.offset().top}},this.reset=function(){for(var e=0,i=c.length;e<i;e++)m[e]={}
c.removeClass("wpProQuiz_reviewQuestionTarget"),c.removeClass("wpProQuiz_reviewQuestionSolved"),c.removeClass("wpProQuiz_reviewQuestionReview")}},I=new o,T=function(i,t,o,n,s){void 0==s&&(s=!0)
var r={}
return{singleMulti:function(){var i=n.find(".wpProQuiz_questionInput")
1==s&&n.find(".wpProQuiz_questionInput").attr("disabled","disabled"),jQuery(".wpProQuiz_questionListItem",n).each(function(t){var o=e(this),n=o.attr("data-pos")
void 0!==n&&(r[n]=i.eq(t).is(":checked"))})},sort_answer:function(){n.children().each(function(i,t){var o=e(this)
r[i]=o.attr("data-pos")}),1==s&&n.sortable("destroy")},matrix_sort_answer:function(){var i=n.children()
new Array
statistcAnswerData={0:-1},i.each(function(){var i=e(this),t=i.attr("data-pos"),o=i.find(".wpProQuiz_maxtrixSortCriterion"),n=o.children()
n.length&&(statistcAnswerData[n.attr("data-pos")]=t),r=statistcAnswerData}),1==s&&o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy")},free_answer:function(){var e=n.children(),i=e.find(".wpProQuiz_questionInput").val()
1==s&&e.find(".wpProQuiz_questionInput").attr("disabled","disabled"),r=i},cloze_answer:function(){r={},n.find(".wpProQuiz_cloze").each(function(i,t){var o=e(this),n=o.children(),a=n.eq(0),d=(n.eq(1),u.methode.cleanupCurlyQuotes(a.val()))
r[i]=d,1==s&&a.attr("disabled","disabled")})},assessment_answer:function(){correct=!0
var i=n.find(".wpProQuiz_questionInput")
1==s&&n.find(".wpProQuiz_questionInput").attr("disabled","disabled")
var t=0
i.filter(":checked").each(function(){t+=parseInt(e(this).val())}),r=t},essay:function(){var e=o.find("ul.wpProQuiz_questionList").data("question_id"),i=n.find(".wpProQuiz_questionEssay").val(),t=n.find("#uploadEssayFile_"+e).val()
void 0!==i&&(r=i),void 0!==t&&(r=t)}}[i](),{response:r}},L=new function(){var i={isEmpty:function(i){return!(i=e.trim(i))||0===i.length}},t={TEXT:0,TEXTAREA:1,NUMBER:2,CHECKBOX:3,EMAIL:4,YES_NO:5,DATE:6,SELECT:7,RADIO:8}
this.checkForm=function(){var o=!0
return r.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var n=e(this),s=1==n.data("required"),r=n.data("type"),a=!0,u=e.trim(n.val())
switch(r){case t.TEXT:case t.TEXTAREA:case t.SELECT:s&&(a=!i.isEmpty(u))
break
case t.NUMBER:!s&&i.isEmpty(u)||(a=!i.isEmpty(u)&&!isNaN(u))
break
case t.EMAIL:!s&&i.isEmpty(u)||(a=!i.isEmpty(u)&&new RegExp(/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/).test(u))
break
case t.CHECKBOX:s&&(a=n.is(":checked"))
break
case t.YES_NO:case t.RADIO:s&&(a=void 0!==n.find('input[type="radio"]:checked').val())
break
case t.DATE:var d=0,c=0
n.find("select").each(function(){d++,c+=i.isEmpty(e(this).val())?0:1}),(s||c>0)&&(a=d==c)}a?n.siblings(".wpProQuiz_invalidate").hide():(o=!1,n.siblings(".wpProQuiz_invalidate").show())}),o},this.getFormData=function(){var i={}
return r.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var o=e(this),n=o.data("form_id")
switch(o.data("type")){case t.TEXT:case t.TEXTAREA:case t.SELECT:case t.NUMBER:case t.EMAIL:i[n]=o.val()
break
case t.CHECKBOX:i[n]=o.is(":checked")?1:0
break
case t.YES_NO:case t.RADIO:i[n]=o.find('input[type="radio"]:checked').val()
break
case t.DATE:i[n]={day:o.find('select[name="wpProQuiz_field_'+n+'_day"]').val(),month:o.find('select[name="wpProQuiz_field_'+n+'_month"]').val(),year:o.find('select[name="wpProQuiz_field_'+n+'_year"]').val()}}}),i}},j=function(i){r.find(".wpProQuiz_questionList").each(function(){var t=e(this),o=t.data("question_id"),n=t.data("type"),s={}
if("single"==n||"multiple"==n)t.find(".wpProQuiz_questionListItem").each(function(){s[e(this).attr("data-pos")]=+e(this).find(".wpProQuiz_questionInput").is(":checked")})
else if("free_answer"==n)s[0]=t.find(".wpProQuiz_questionInput").val()
else{if("sort_answer"==n)return!0
if("matrix_sort_answer"==n)return!0
if("cloze_answer"==n){var r=0
t.find(".wpProQuiz_cloze input").each(function(){s[r++]=e(this).val()})}else if("assessment_answer"==n)s[0]="",t.find(".wpProQuiz_questionInput:checked").each(function(){s[e(this).data("index")]=e(this).val()})
else if("essay"==n)return}i[o].data=s})}
u.methode={wdmcheckQuestion:function(i,t){var o={}
i=void 0==i?l:i,i.each(function(){var i=e(this),t=i.index(),n=i.find(q.questionList),s=n.data("question_id"),r=a.json[n.data("question_id")],d=r.type
if(I.questionStop(),i.data("check"))return!0
"single"!=r.type&&"multiple"!=r.type||(d="singleMulti"),o[s]=T(d,0,i,n,!0),u.methode.CookieSaveResponse(s,t,r.type,o[s])}),a.checkAnswers={list:i,responses:o,endCheck:t},u.methode.showSpinner(),u.methode.ajax({action:"ld_adv_quiz_pro_ajax",func:"checkAnswers",data:{quizId:a.quizId,quiz:a.quiz,quiz_nonce:a.quiz_nonce,responses:JSON.stringify(o)}},function(i){u.methode.hideSpinner(),a.checkAnswers.list.each(function(){var t=e(this),o=t.find(q.questionList),n=o.data("question_id")
if(void 0!==i[n])var s=i[n]
if(s&&s.c){var r=s.e&&s.e.AnswerMessage?s.e.AnswerMessage:""
t.find(".wpProQuiz_incorrect").hide(),t.find(".wpProQuiz_correct").show(),t.find(".wdmProQuiz_response").show().empty().html(r),t.find('[name="wdmcheck"]').hide(),t.find('[name="next"]').show(),u.methode.markCorrectIncorrect(s,t,o)}else{var r=s.e&&s.e.AnswerMessage?s.e.AnswerMessage:"Please try again."
t.find(".wpProQuiz_correct").hide(),t.find(".wdmProQuiz_response").show().empty().html(r),t.find(".wpProQuiz_incorrect").show().children("span").first().addClass("wpProQuiz_answerIncorrect"),t.find(".wpProQuiz_questionInput").removeAttr("disabled")}t.find(".wpProQuiz_response").show()})})},parseBitOptions:function(){if(a.bo){P.randomAnswer=1&a.bo,P.randomQuestion=2&a.bo,P.disabledAnswerMark=4&a.bo,P.checkBeforeStart=8&a.bo,P.preview=16&a.bo,P.isAddAutomatic=64&a.bo,P.reviewQustion=128&a.bo,P.quizSummeryHide=256&a.bo,P.skipButton=512&a.bo,P.autoStart=1024&a.bo,P.forcingQuestionSolve=2048&a.bo,P.hideQuestionPositionOverview=4096&a.bo,P.formActivated=8192&a.bo,P.maxShowQuestion=16384&a.bo,P.sortCategories=32768&a.bo
var e=32&a.bo
e&&void 0!=jQuery.support&&void 0!=jQuery.support.cors&&0==jQuery.support.cors&&(P.cors=e)}},setClozeStyle:function(){r.find(".wpProQuiz_cloze input").each(function(){for(var i=e(this),t="",o=i.data("wordlen"),n=0;n<o;n++)t+="w"
var s=e(document.createElement("span")).css("visibility","hidden").text(t).appendTo(e("body")),r=s.width()
s.remove(),i.width(r+5)})},parseTime:function(e){var i=parseInt(e%60),t=parseInt(e/60%60),o=parseInt(e/3600%24)
return i=(i>9?"":"0")+i,t=(t>9?"":"0")+t,(o=(o>9?"":"0")+o)+":"+t+":"+i},cleanupCurlyQuotes:function(i){return i=i.replace(/\u2018/,"'"),i=i.replace(/\u2019/,"'"),i=i.replace(/\u201C/,'"'),i=i.replace(/\u201D/,'"'),e.trim(i).toLowerCase()},resetMatrix:function(i){i.each(function(){var i=e(this),t=i.find(".wpProQuiz_sortStringList")
i.find(".wpProQuiz_sortStringItem").each(function(){t.append(e(this))})})},marker:function(e,i){P.disabledAnswerMark||(i?e.addClass("wpProQuiz_answerCorrect"):e.addClass("wpProQuiz_answerIncorrect"))},startQuiz:function(i){if(g.loadLock)return void(g.isQuizStart=1)
if(g.isQuizStart=0,g.isLocked)return y.quizStartPage.hide(),void r.find(".wpProQuiz_lock").show()
if(g.isPrerequisite)return y.quizStartPage.hide(),void r.find(".wpProQuiz_prerequisite").show()
if(g.isUserStartLocked)return y.quizStartPage.hide(),void r.find(".wpProQuiz_startOnlyRegisteredUser").show()
if(P.maxShowQuestion&&!i){if(a.formPos==x.START&&!L.checkForm())return
return y.quizStartPage.hide(),r.find(".wpProQuiz_loadQuiz").show(),void u.methode.loadQuizDataAjax(!0)}if(!P.formActivated||a.formPos!=x.START||L.checkForm()){switch(u.methode.loadQuizData(),P.randomQuestion&&u.methode.random(y.questionList),P.randomAnswer&&u.methode.random(r.find(q.questionList)),P.sortCategories&&u.methode.sortCategories(),u.methode.random(r.find(".wpProQuiz_sortStringList")),u.methode.random(r.find('.wpProQuiz_questionList[data-type="sort_answer"]')),r.find(".wpProQuiz_listItem").each(function(i,t){var o=e(this)
o.find(".wpProQuiz_question_page span:eq(0)").text(i+1),o.find("> h5 span").text(i+1),o.find(".wpProQuiz_questionListItem").each(function(i,t){e(this).find("> span:not(.wpProQuiz_cloze)").text(i+1+". ")})}),y.next=r.find(q.next),a.mode){case 3:r.find('input[name="checkSingle"]').show()
break
case 2:r.find(q.check).show(),!P.skipButton&&P.reviewQustion&&r.find(q.skip).show()
break
case 1:r.find('input[name="back"]').slice(1).show()
case 0:y.next.show()
break
case 4:y.wdmcheck.show()}(P.hideQuestionPositionOverview||3==a.mode)&&r.find(".wpProQuiz_question_page").hide()
var o=y.next.last()
f=o.val(),o.val(a.lbn)
var n=y.questionList.children()
if(y.listItems=r.find(".wpProQuiz_list > li"),3==a.mode)u.methode.showSinglePage(0)
else{l=n.eq(0).show()
var s=l.find(q.questionList).data("question_id")
I.questionStart(s)}I.startQuiz(),r.find(".wpProQuiz_sortable").parents("ul").sortable({update:function(i,t){var o=e(this).parents(".wpProQuiz_listItem")
r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}}).disableSelection(),r.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({connectWith:".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList",placeholder:"wpProQuiz_placehold",update:function(i,t){var o=e(this).parents(".wpProQuiz_listItem")
r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}}).disableSelection(),h=[],S.start(),p=+new Date,d={comp:{points:0,correctQuestions:0,quizTime:0}},r.find(".wpProQuiz_questionList").each(function(){var i=e(this).data("question_id")
d[i]={time:0}}),c={},e.each(t.catPoints,function(e,i){c[e]=0}),y.quizStartPage.hide(),r.find(".wpProQuiz_loadQuiz").hide(),y.quiz.show(),b.show(),u.methode.CookieInit(),3!=a.mode&&r.trigger({type:"changeQuestion",values:{item:l,index:l.index()}})}},viewUserQuizStatistics:function(e){var i=jQuery(e).data("ref_id"),t=jQuery(e).data("quiz_id"),o={action:"wp_pro_quiz_admin_ajax",func:"statisticLoadUser",data:{quizId:t,userId:0,refId:i,avg:0}}
jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show()
var n=jQuery("#wpProQuiz_user_content").hide()
jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:o,error:function(e,i,t){},success:function(e){void 0!==e.html&&(n.html(e.html),jQuery("#wpProQuiz_user_content").show(),jQuery("#wpProQuiz_loadUserData").hide(),n.find(".statistic_data").click(function(){return jQuery(this).parents("tr").next().toggle("fast"),!1}))}}),jQuery("#wpProQuiz_overlay_close").click(function(){jQuery("#wpProQuiz_user_overlay").hide()})},showSingleQuestion:function(e){var i=e?Math.ceil(e/a.qpp):1
this.showSinglePage(i)},showSinglePage:function(e){if($listItem=y.questionList.children().hide(),!a.qpp)return void $listItem.show()
e=e?+e:1
var i=Math.ceil(r.find(".wpProQuiz_list > li").length/a.qpp)
if(!(e>i)){var t=r.find(q.singlePageLeft).hide(),o=r.find(q.singlePageRight).hide(),n=r.find('input[name="checkSingle"]').hide()
e>1&&t.val(t.data("text").replace(/%d/,e-1)).show(),e==i?n.show():o.val(o.data("text").replace(/%d/,e+1)).show(),m=e
var s=a.qpp*(e-1)
$listItem.slice(s,s+a.qpp).show(),u.methode.scrollTo(y.quiz)}},nextQuestion:function(){u.methode.CookieProcessQuestionResponse(l),jQuery(".mejs-pause").trigger("click"),this.showQuestionObject(l.next())},prevQuestion:function(){this.showQuestionObject(l.prev())},showQuestion:function(e){var i=y.listItems.eq(e)
if(3==a.mode||w)return a.qpp&&u.methode.showSingleQuestion(e+1),u.methode.scrollTo(i,1),void I.startQuiz()
this.showQuestionObject(i)},showQuestionObject:function(i){if(!i.length&&P.forcingQuestionSolve&&P.quizSummeryHide&&P.reviewQustion){list=y.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(q.questionList)
t.data("question_id")
"sort_answer"==a.json[t.data("question_id")].type&&r.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0}})})
for(var t=0,o=r.find(".wpProQuiz_listItem").length;t<o;t++)if(!h[t])return alert(WpProQuizGlobal.questionsNotSolved),!1}if(l.hide(),l=i.show(),u.methode.scrollTo(y.quiz),r.trigger({type:"changeQuestion",values:{item:l,index:l.index()}}),l.length){var n=l.find(q.questionList).data("question_id")
I.questionStart(n)}else u.methode.showQuizSummary()},skipQuestion:function(){r.trigger({type:"skipQuestion",values:{item:l,index:l.index()}}),u.methode.nextQuestion()},reviewQuestion:function(){r.trigger({type:"reviewQuestion",values:{item:l,index:l.index()}})},uploadFile:function(i){var t=i.currentTarget.id.replace("uploadEssaySubmit_",""),o=e("#uploadEssay_"+t)[0].files[0]
if(void 0!==o){var n=e("#_uploadEssay_nonce_"+t).val(),s=e("#uploadEssaySubmit_"+t)
s.val("Uploading...")
var a=new FormData
a.append("action","learndash_upload_essay"),a.append("nonce",n),a.append("question_id",t),a.append("essayUpload",o),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:a,cache:!1,contentType:!1,processData:!1,success:function(i){if(1==i.success&&void 0!==i.data.filelink){e("#uploadEssayFile_"+t).val(i.data.filelink),s.attr("disabled","disabled"),setTimeout(function(){s.val("Success")},1500)
var o=e("#uploadEssayFile_"+t).parents(".wpProQuiz_listItem")
r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}else s.removeAttr("disabled"),s.val("Failed. Try again.")}})}i.preventDefault()},showQuizSummary:function(){if(I.questionStop(),I.stopQuiz(),P.quizSummeryHide||!P.reviewQustion)return void(P.formActivated&&a.formPos==x.END?(b.hide(),y.quiz.hide(),u.methode.scrollTo(r.find(".wpProQuiz_infopage").show())):u.methode.finishQuiz())
var i=r.find(".wpProQuiz_checkPage")
i.find("ol:eq(0)").empty().append(r.find(".wpProQuiz_reviewQuestion ol li").clone().removeClass("wpProQuiz_reviewQuestionTarget")).children().click(function(t){i.hide(),y.quiz.show(),b.show(!0),u.methode.showQuestion(e(this).index())})
for(var t=0,o=0,n=h.length;o<n;o++)h[o]&&t++
i.find("span:eq(0)").text(t),b.hide(),y.quiz.hide(),i.show(),u.methode.scrollTo(i)},finishQuiz:function(e){I.questionStop(),I.stopQuiz(),S.stop()
var i=(+new Date-p)/1e3
i=a.timelimit&&i>a.timelimit?a.timelimit:i,v=i,r.find(".wpProQuiz_quiz_time span").text(u.methode.parseTime(i)),e&&y.results.find(".wpProQuiz_time_limit_expired").show(),u.methode.checkQuestion(y.questionList.children(),!0)},finishQuizEnd:function(){r.find(".wpProQuiz_correct_answer").text(d.comp.correctQuestions),d.comp.result=Math.round(d.comp.points/a.globalPoints*100*100)/100
var i=!1
if(e.each(d,function(){void 0!==this.graded_status&&"not_graded"==this.graded_status&&(i=!0)}),"undefined"!=typeof certificate_details&&void 0!=certificate_details.certificateLink&&""!=certificate_details.certificateLink&&d.comp.result>=100*certificate_details.certificate_threshold){var o=r.find(".wpProQuiz_certificate")
1==i&&"undefined"!=typeof certificate_pending&&o.html(certificate_pending),o.show()}var n=r.find(".quiz_continue_link"),s=!1
jQuery(n).hasClass("show_quiz_continue_buttom_on_fail")&&(s=!0),void 0!==t.passingpercentage&&parseFloat(t.passingpercentage)>=0?d.comp.result>=t.passingpercentage||s?"undefined"!=typeof continue_details&&(r.find(".quiz_continue_link").html(continue_details),r.find(".quiz_continue_link").show()):r.find(".quiz_continue_link").hide():"undefined"!=typeof continue_details&&(r.find(".quiz_continue_link").html(continue_details),r.find(".quiz_continue_link").show()),$pointFields=r.find(".wpProQuiz_points span"),$gradedPointsFields=r.find(".wpProQuiz_graded_points span"),$pointFields.eq(0).text(d.comp.points),$pointFields.eq(1).text(a.globalPoints),$pointFields.eq(2).text(d.comp.result+"%"),$gradedQuestionCount=0,$gradedQuestionPoints=0,e.each(d,function(i,t){if(e.isNumeric(i)&&t.graded_id){var o=t.possiblePoints-t.points
o>0&&($gradedQuestionPoints+=o,$gradedQuestionCount++)}}),$gradedQuestionCount>0&&(e(".wpProQuiz_points").hide(),e(".wpProQuiz_graded_points").show(),$gradedPointsFields.eq(0).text(d.comp.points),$gradedPointsFields.eq(1).text(a.globalPoints),$gradedPointsFields.eq(2).text(d.comp.result+"%"),$gradedPointsFields.eq(3).text($gradedQuestionCount),$gradedPointsFields.eq(4).text($gradedQuestionPoints)),r.find(".wpProQuiz_resultsList > li").eq(u.methode.findResultIndex(d.comp.result)).show(),u.methode.setAverageResult(d.comp.result,!1),this.setCategoryOverview(),u.methode.sendCompletedQuiz(),P.isAddAutomatic&&k.isUser&&u.methode.addToplist(),b.hide(),r.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(),y.quiz.hide()},sending:function(e,i,t){y.sending.show()
var o,n=y.sending.find(".sending_progress_bar")
if(o=void 0==typeof e||null==e?parseInt(100*n.width()/n.offsetParent().width())+156:e,void 0==i)var i=80
void 0==t&&(t=1),null!=_&&void 0!=typeof _&&clearInterval(_),_=setInterval(function(){var e=parseInt(100*n.width()/n.offsetParent().width())
e>=i&&(clearInterval(_),e>=100&&setTimeout(u.methode.showResults(),2e3)),n.css("width",o+"%"),o+=t},300)},showResults:function(){y.sending.hide(),y.results.show(),u.methode.scrollTo(y.results)},setCategoryOverview:function(){d.comp.cats={},r.find(".wpProQuiz_catOverview li").each(function(){var i=e(this),t=i.data("category_id")
if(void 0===a.catPoints[t])return i.hide(),!0
var o=Math.round(c[t]/a.catPoints[t]*100*100)/100
d.comp.cats[t]=o,i.find(".wpProQuiz_catPercent").text(o+"%"),i.show()})},questionSolved:function(e){h[e.values.index]=e.values.solved},sendCompletedQuiz:function(){if(!P.preview){j(d)
var e=L.getFormData()
jQuery.post(WpProQuizGlobal.ajaxurl,{action:"wp_pro_quiz_completed_quiz",quiz:a.quiz,quizId:a.quizId,results:JSON.stringify(d),timespent:v,forms:e,quiz_nonce:a.quiz_nonce}).success(function(e){u.methode.sending(null,100,15),u.methode.CookieDelete()})}},findResultIndex:function(e){for(var i=a.resultsGrade,t=-1,o=999999,n=0;n<i.length;n++){var s=i[n]
e>=s&&e-s<o&&(o=e-s,t=n)}return t},showQustionList:function(){e(".wdmProQuiz_response").hide(),w=!w,y.toplistShowInButton.hide(),y.quiz.toggle(),r.find(".wpProQuiz_QuestionButton").hide(),y.questionList.children().show(),b.toggle(),r.find(".wpProQuiz_question_page").hide()},random:function(i){i.each(function(){var i=e(this).children().get().sort(function(){return Math.round(Math.random())-.5})
e(i).appendTo(i[0].parentNode)})},sortCategories:function(){var i=e(".wpProQuiz_list").children().get().sort(function(i,t){var o=e(i).find(".wpProQuiz_questionList").data("question_id"),n=e(t).find(".wpProQuiz_questionList").data("question_id")
return a.json[o].catId-a.json[n].catId})
e(i).appendTo(i[0].parentNode)},restartQuiz:function(){y.results.hide(),y.quizStartPage.show(),y.questionList.children().hide(),y.toplistShowInButton.hide(),b.hide(),r.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color",""),r.find('.wpProQuiz_questionListItem input[type="text"]').val(""),r.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"),r.find(".wpProQuiz_listItem").data("check",!1),r.find("textarea.wpProQuiz_questionEssay").val(""),r.find("input.uploadEssayFile").val(""),r.find("input.wpProQuiz_upload_essay").val(""),r.find(".wpProQuiz_response").hide().children().hide(),u.methode.resetMatrix(r.find(".wpProQuiz_listItem")),r.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"),r.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(),r.find('.wpProQuiz_question_page, input[name="tip"]').show(),r.find(".wpProQuiz_certificate").attr("style","display: none !important"),y.results.find(".wpProQuiz_time_limit_expired").hide(),y.next.last().val(f),w=!1},showSpinner:function(){r.find(".wpProQuiz_spinner").show()},hideSpinner:function(){r.find(".wpProQuiz_spinner").hide()},checkQuestion:function(i,t){var o=void 0!=i,n={}
i=void 0==i?l:i,i.each(function(){var i=e(this),t=i.index(),o=i.find(q.questionList),s=o.data("question_id"),r=a.json[o.data("question_id")],d=r.type
if(I.questionStop(),i.data("check"))return!0
"single"!=r.type&&"multiple"!=r.type||(d="singleMulti"),n[s]=T(d,0,i,o,!0),u.methode.CookieSaveResponse(s,t,r.type,n[s])}),a.checkAnswers={list:i,responses:n,endCheck:t,finishQuiz:o},o?u.methode.sending(1,80,3):u.methode.showSpinner(),u.methode.ajax({action:"ld_adv_quiz_pro_ajax",func:"checkAnswers",data:{quizId:a.quizId,quiz:a.quiz,quiz_nonce:a.quiz_nonce,responses:JSON.stringify(n)}},function(i){u.methode.hideSpinner()
var t=a.checkAnswers.list,o=(a.checkAnswers.responses,a.checkAnswers.r,a.checkAnswers.endCheck),n=a.checkAnswers.finishQuiz
t.each(function(){var t=e(this),n=t.find(q.questionList),s=n.data("question_id")
if(t.data("check"))return!0
if(void 0!==i[s]){var p=i[s]
data=a.json[n.data("question_id")],t.find(".wpProQuiz_response").show(),t.find(q.check).hide(),t.find(q.skip).hide(),t.find(q.next).show(),d[data.id].points=p.p,void 0!==p.p_nonce?d[data.id].p_nonce=p.p_nonce:d[data.id].p_nonce="",d[data.id].correct=Number(p.c),d[data.id].data=p.s,void 0!==p.a_nonce?d[data.id].a_nonce=p.a_nonce:d[data.id].a_nonce="",d[data.id].possiblePoints=p.e.possiblePoints,jQuery.isEmptyObject(d[data.id].data)&&(void 0==p.e.type||"sort_answer"!=p.e.type&&"matrix_sort_answer"!=p.e.type||(d[data.id].data=p.e.r)),void 0!==p.e.graded_id&&p.e.graded_id>0&&(d[data.id].graded_id=p.e.graded_id),void 0!==p.e.graded_status&&(d[data.id].graded_status=p.e.graded_status),d.comp.points+=p.p,t.find(".wpProQuiz_response").show(),t.find(q.check).hide(),t.find(q.skip).hide(),t.find(q.next).show(),jQuery.isEmptyObject(d[data.id].data)&&void 0!==p.e.type&&("sort_answer"!=p.e.type&&"matrix_sort_answer"!=p.e.type||void 0!==p.e.r&&(d[data.id].data=p.e.r),"essay"==p.e.type&&void 0!==p.e.graded_id&&(d[data.id].data={graded_id:p.e.graded_id})),c[data.catId]+=p.p,u.methode.markCorrectIncorrect(p,t,n),p.c?(void 0!==p.e.AnswerMessage&&(t.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(p.e.AnswerMessage),t.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_correct").show(),d.comp.correctQuestions+=1):(void 0!==p.e.AnswerMessage&&(t.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(p.e.AnswerMessage),t.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_incorrect").show()),t.find(".wpProQuiz_responsePoints").text(p.p),t.data("check",!0),o||r.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:!0}})}}),n&&u.methode.finishQuizEnd()})},markCorrectIncorrect:function(i,t,o){if(void 0!==i.e.c)switch(i.e.type){case"single":case"multiple":o.children().each(function(t){var o=e(this),n=o.attr("data-pos")
i.e.c[n]?u.methode.marker(o,!0):!i.c&&i.e.r[n]&&u.methode.marker(o,!1)})
break
case"free_answer":var n=o.children()
i.c?u.methode.marker(n,!0):u.methode.marker(n,!1)
break
case"cloze_answer":o.find(".wpProQuiz_cloze").each(function(t,o){var n=e(this),s=n.children(),r=s.eq(0),a=s.eq(1)
u.methode.cleanupCurlyQuotes(r.val())
i.s[t]?r.css("background-color","#B0DAB0"):(r.css("background-color","#FFBABA"),void 0!==i.e.c[t]&&(a.html("("+i.e.c[t].join()+")"),a.show())),r.attr("disabled","disabled")})
break
case"sort_answer":var s=o.children()
s.each(function(t,o){var n=e(this)
i.e.c[t]==n.attr("data-pos")?u.methode.marker(n,!0):u.methode.marker(n,!1)}),s.children().css({"box-shadow":"0 0",cursor:"auto"})
var r=new Array
jQuery.each(i.e.c,function(e,i){r[i]=e}),s.sort(function(i,t){return r[e(i).attr("data-pos")]>r[e(t).attr("data-pos")]?1:-1}),o.append(s)
break
case"matrix_sort_answer":var s=o.children(),a=new Array
statistcAnswerData={0:-1},s.each(function(){var t=e(this),o=(t.attr("data-pos"),t.find(".wpProQuiz_maxtrixSortCriterion")),n=o.children(),s=n.attr("data-pos")
n.length&&i.e.c[s]==t.attr("data-pos")?u.methode.marker(t,!0):u.methode.marker(t,!1),a[s]=o}),u.methode.resetMatrix(t),t.find(".wpProQuiz_sortStringItem").each(function(){var i=a[e(this).attr("data-pos")]
void 0!=i&&i.append(this)}).css({"box-shadow":"0 0",cursor:"auto"})}},showTip:function(){var i=e(this),t=i.siblings(".wpProQuiz_question").find(q.questionList).data("question_id")
i.siblings(".wpProQuiz_tipp").toggle("fast"),d[t].tip=1,e(document).bind("mouseup.tipEvent",function(i){var t=r.find(".wpProQuiz_tipp"),o=r.find('input[name="tip"]')
t.is(i.target)||0!=t.has(i.target).length||o.is(i.target)||(t.hide("fast"),e(document).unbind(".tipEvent"))})},ajax:function(i,t,o){o=o||"json",P.cors&&(jQuery.support.cors=!0),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:i,success:t,dataType:o}),P.cors&&(jQuery.support.cors=!1)},checkQuizLock:function(){g.loadLock=1,u.methode.ajax({action:"wp_pro_quiz_check_lock",quizId:a.quizId},function(e){void 0!=e.lock&&(g.isLocked=e.lock.is,e.lock.pre&&r.find('input[name="restartQuiz"]').hide()),void 0!=e.prerequisite&&(g.isPrerequisite=1,r.find(".wpProQuiz_prerequisite span").text(e.prerequisite)),void 0!=e.startUserLock&&(g.isUserStartLocked=e.startUserLock),g.loadLock=0,g.isQuizStart&&u.methode.startQuiz()})},loadQuizData:function(){u.methode.ajax({action:"wp_pro_quiz_load_quiz_data",quizId:a.quizId},function(e){e.toplist&&u.methode.handleToplistData(e.toplist),void 0!=e.averageResult&&u.methode.setAverageResult(e.averageResult,!0)})},setAverageResult:function(e,i){var t=r.find(".wpProQuiz_resultValue:eq("+(i?0:1)+") > * ")
t.eq(1).text(e+"%"),t.eq(0).css("width",240*e/100+"px")},handleToplistData:function(e){var i=r.find(".wpProQuiz_addToplist"),t=i.find(".wpProQuiz_addBox").show().children("div")
if(e.canAdd)if(i.show(),i.find(".wpProQuiz_addToplistMessage").hide(),i.find(".wpProQuiz_toplistButton").show(),k.token=e.token,k.isUser=0,e.userId)t.hide(),k.isUser=1,P.isAddAutomatic&&i.hide()
else{t.show()
var o=t.children().eq(1)
e.captcha?(o.find('input[name="wpProQuiz_captchaPrefix"]').val(e.captcha.code),o.find(".wpProQuiz_captchaImg").attr("src",e.captcha.img),o.find('input[name="wpProQuiz_captcha"]').val(""),o.show()):o.hide()}else i.hide()},scrollTo:function(i,t){var o=i.offset().top-100;(t||(window.pageYOffset||document.body.scrollTop)>o)&&e("html,body").animate({scrollTop:o},300)},addToplist:function(){if(!P.preview){var e=r.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(),i=r.find(".wpProQuiz_addBox").hide()
u.methode.ajax({action:"wp_pro_quiz_add_toplist",quizId:a.quizId,quiz:a.quiz,token:k.token,name:i.find('input[name="wpProQuiz_toplistName"]').val(),email:i.find('input[name="wpProQuiz_toplistEmail"]').val(),captcha:i.find('input[name="wpProQuiz_captcha"]').val(),prefix:i.find('input[name="wpProQuiz_captchaPrefix"]').val(),results:d,timespent:v},function(t){e.text(t.text),t.clear?(i.hide(),u.methode.updateToplist()):i.show(),t.captcha&&(i.find(".wpProQuiz_captchaImg").attr("src",t.captcha.img),i.find('input[name="wpProQuiz_captchaPrefix"]').val(t.captcha.code),i.find('input[name="wpProQuiz_captcha"]').val(""))})}},updateToplist:function(){"function"==typeof wpProQuiz_fetchToplist&&wpProQuiz_fetchToplist()},registerSolved:function(){r.find('.wpProQuiz_questionInput[type="text"]').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=!1
""!=t.val()&&(n=!0),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:n}})}),r.find('.wpProQuiz_questionList[data-type="single"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type="assessment_answer"] .wpProQuiz_questionInput').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=this.checked
r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:n}})}),r.find(".wpProQuiz_cloze input").change(function(){var i=e(this),t=i.parents(".wpProQuiz_listItem"),o=!0
t.find(".wpProQuiz_cloze input").each(function(){if(""==e(this).val())return o=!1,!1}),r.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:o}})}),r.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=0
o.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').each(function(e){this.checked&&n++}),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!!n}})}),r.find('.wpProQuiz_questionList[data-type="essay"] textarea.wpProQuiz_questionEssay').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=!1
""!=t.val()&&(n=!0),r.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:n}})})},loadQuizDataAjax:function(i){u.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"quizLoadData",data:{quizId:a.quizId,quiz:a.quiz,quiz_nonce:a.quiz_nonce}},function(t){a.globalPoints=t.globalPoints,a.catPoints=t.catPoints,a.json=t.json,y.quiz.remove(),r.find(".wpProQuiz_quizAnker").after(t.content),e("table.wpProQuiz_toplistTable caption span.wpProQuiz_max_points").html(a.globalPoints),y={back:r.find('input[name="back"]'),next:r.find(q.next),quiz:r.find(".wpProQuiz_quiz"),questionList:r.find(".wpProQuiz_list"),results:r.find(".wpProQuiz_results"),sending:r.find(".wpProQuiz_sending"),quizStartPage:r.find(".wpProQuiz_text"),timelimit:r.find(".wpProQuiz_time_limit"),toplistShowInButton:r.find(".wpProQuiz_toplistShowInButton"),listItems:e()},u.methode.initQuiz(),i&&u.methode.startQuiz(!0)
var o=t.content,n=o.search("wp-audio-shortcode"),s=o.search("wp-video-shortcode")
"-1"==n&&"-1"==s||(e.getScript(t.site_url+"/wp-includes/js/mediaelement/mediaelement-and-player.min.js"),e.getScript(t.site_url+"/wp-includes/js/mediaelement/wp-mediaelement.js"),e("<link/>",{rel:"stylesheet",type:"text/css",href:t.site_url+"/wp-includes/js/mediaelement/mediaelementplayer.min.css"}).appendTo("head"))})},nextQuestionClicked:function(){var e=l.find(q.questionList)
if("sort_answer"==a.json[e.data("question_id")].type){var i=l.index()
void 0===h[i]&&r.trigger({type:"questionSolved",values:{item:l,index:i,solved:!0}})}if(P.forcingQuestionSolve&&!h[l.index()]&&(P.quizSummeryHide||!P.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1
u.methode.nextQuestion()},initQuiz:function(){u.methode.setClozeStyle(),u.methode.registerSolved(),y.next.click(u.methode.nextQuestionClicked),y.back.click(function(){u.methode.prevQuestion()}),r.find(q.check).click(function(){if(P.forcingQuestionSolve&&!h[l.index()]&&(P.quizSummeryHide||!P.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1
u.methode.checkQuestion()}),r.find(q.wdmcheck).click(function(){if(P.forcingQuestionSolve&&!h[l.index()]&&(P.quizSummeryHide||!P.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1
u.methode.wdmcheckQuestion()}),r.find('input[name="checkSingle"]').click(function(){if(list=y.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(q.questionList)
t.data("question_id")
"sort_answer"==a.json[t.data("question_id")].type&&r.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0}})}),P.forcingQuestionSolve&&(P.quizSummeryHide||!P.reviewQustion))for(var i=0,t=r.find(".wpProQuiz_listItem").length;i<t;i++)if(!h[i])return alert(WpProQuizGlobal.questionsNotSolved),!1
u.methode.showQuizSummary()}),r.find('input[name="tip"]').click(u.methode.showTip),r.find('input[name="skip"]').click(u.methode.skipQuestion),r.find('input[name="wpProQuiz_pageLeft"]').click(function(){u.methode.showSinglePage(m-1)}),r.find('input[name="wpProQuiz_pageRight"]').click(function(){u.methode.showSinglePage(m+1)}),r.trigger("learndash-quiz-init")},CookieInit:function(){0!=a.timelimitcookie&&(Q="ld_"+a.quizId+"_quiz_responses",z=jQuery.cookie(Q),z=""==z||void 0==z?{}:JSON.parse(z),u.methode.CookieSetResponses(),u.methode.CookieResponseTimer())},CookieDelete:function(){0!=a.timelimitcookie&&(Q="ld_"+a.quizId+"_quiz_responses",jQuery.cookie(Q,""))},CookieProcessQuestionResponse:function(i){null!=i&&i.each(function(){var i=e(this),t=i.index(),o=i.find(q.questionList),n=o.data("question_id"),s=a.json[o.data("question_id")],r=s.type
"single"!=s.type&&"multiple"!=s.type||(r="singleMulti")
var d=T(r,0,i,o,!1)
u.methode.CookieSaveResponse(n,t,s.type,d)})},CookieSaveResponse:function(e,i,t,o){if(0!=a.timelimitcookie){z[e]={index:i,value:o.response,type:t}
var n=new Date
n.setTime(n.getTime()+1e3*a.timelimitcookie),jQuery.cookie(Q,JSON.stringify(z),{expires:n})}},CookieResponseTimer:function(){0!=a.timelimitcookie&&r.bind("questionSolved",function(e){u.methode.CookieProcessQuestionResponse(e.values.item)})},CookieSetResponses:function(){if(0!=a.timelimitcookie&&void 0!=z&&Object.keys(z).length){y.questionList.children().each(function(){var i=e(this),t=i.find(q.questionList),o=t.data("question_id")
if(void 0!=z[o]){var s=z[o],r=a.json[t.data("question_id")]
r.type===s.type&&n(r,s.value,i,t)}})}}},u.preInit=function(){u.methode.parseBitOptions(),b.init(),r.find('input[name="startQuiz"]').click(function(){return u.methode.startQuiz(),!1}),r.find('input[name="viewUserQuizStatistics"]').click(function(){return u.methode.viewUserQuizStatistics(this),!1}),P.checkBeforeStart&&!P.preview&&u.methode.checkQuizLock(),r.find('input[name="reShowQuestion"]').click(function(){u.methode.showQustionList()}),r.find('input[name="restartQuiz"]').click(function(){u.methode.restartQuiz()}),r.find('input[name="review"]').click(u.methode.reviewQuestion),r.find('input[name="wpProQuiz_toplistAdd"]').click(u.methode.addToplist),r.find('input[name="quizSummary"]').click(u.methode.showQuizSummary),r.find('input[name="endQuizSummary"]').click(function(){if(P.forcingQuestionSolve){list=y.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(q.questionList)
t.data("question_id")
if("sort_answer"==a.json[t.data("question_id")].type){var o=i.index()
void 0===h[o]&&r.trigger({type:"questionSolved",values:{item:i,index:o,solved:!0}})}})
for(var i=0,t=r.find(".wpProQuiz_listItem").length;i<t;i++)if(!h[i])return alert(WpProQuizGlobal.questionsNotSolved),!1}P.formActivated&&a.formPos==x.END&&!L.checkForm()||u.methode.finishQuiz()}),r.find('input[name="endInfopage"]').click(function(){L.checkForm()&&u.methode.finishQuiz()}),r.find('input[name="showToplist"]').click(function(){y.quiz.hide(),y.toplistShowInButton.toggle()}),r.bind("questionSolved",u.methode.questionSolved),r.find('input[id^="uploadEssaySubmit"]').click(u.methode.uploadFile),P.maxShowQuestion||u.methode.initQuiz(),P.autoStart&&u.methode.startQuiz()},u.preInit()},e.fn.wpProQuizFront=function(i){return this.each(function(){void 0==e(this).data("wpProQuizFront")&&e(this).data("wpProQuizFront",new e.wpProQuizFront(this,i))})}}(jQuery)
